{"version":3,"sources":["Login.js","Add.js","Dashboard.js","apiClient.js","App.js","reportWebVitals.js","index.js"],"names":["Login","props","state","disabled","e","preventDefault","this","setState","client","login","target","username","value","password","then","response","loggedIn","data","token","catch","alert","onSubmit","submitHandler","type","name","React","Component","Add","result","currentAd","updateAd","_id","adName","price","addAd","console","log","document","getElementById","reset","refreshList","id","defaultValue","Dashboard","ads","undefined","getAds","removeAd","ad","map","current","onClick","removeAdvert","updateAdvert","buildrows","logoutHandler","url","ApiClient","tokenProvider","axios","method","headers","authorization","error","status","Promise","reject","authenticatedCall","App","window","localStorage","getItem","logout","setItem","removeItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.c0982156.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      disabled: false\r\n    }\r\n  }\r\n\r\n  submitHandler(e) {\r\n    e.preventDefault()\r\n    this.setState({ disabled: true })\r\n    this.props.client.login(e.target.username.value, e.target.password.value)\r\n      .then((response) => {\r\n        this.setState({ disabled: false })\r\n        this.props.loggedIn(response.data.token)\r\n      })\r\n      .catch(() => {\r\n        alert(\"an error occured, please try again\");\r\n        this.setState({ disabled: false })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        Login<br />\r\n        <form onSubmit={(e) => this.submitHandler(e)} >\r\n          username<br />\r\n          <input type=\"text\" name=\"username\" disabled={this.state.disabled} /><br />\r\n      password<br />\r\n          <input type=\"password\" name=\"password\" disabled={this.state.disabled} /><br /><br />\r\n          <button type=\"submit\" disabled={this.state.disabled}> Submit </button>\r\n        </form>\r\n      </>\r\n    )\r\n\r\n  }\r\n}\r\n\r\nexport default Login;\r\n","import React from 'react';\r\n\r\n\r\nclass Add extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      disabled: false,\r\n    }\r\n  }\r\n\r\n  submitHandler(e) {\r\n    e.preventDefault()\r\n    this.setState({ disabled: true })\r\n    let result\r\n    if (this.props.currentAd) {\r\n      result = this.props.client.updateAd(this.props.currentAd._id, e.target.adName.value, e.target.price.value)\r\n    } else {\r\n      result = this.props.client.addAd(e.target.adName.value, e.target.price.value)\r\n    }\r\n    console.log(result)\r\n    result.then(() => {\r\n      this.setState({ disabled: false })\r\n      document.getElementById(\"addForm\").reset()\r\n      this.props.refreshList()\r\n    })\r\n      .catch(() => {\r\n        console.log(\"catch\")\r\n        alert(\"an error occured, please try again\");\r\n        this.setState({ disabled: false })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    console.log(this.props.currentAd)\r\n    return (\r\n      <>\r\n\r\n        {this.props.currentAd ? \"Update\" : \"Add\"}<br />\r\n\r\n        <form onSubmit={(e) => this.submitHandler(e)} id=\"addForm\" >\r\n          Name: <br />\r\n          <input type=\"text\" defaultValue={this.props.currentAd?.name} name=\"adName\" disabled={this.state.disabled} /><br />\r\n          Price:<br />\r\n          <input type=\"text\" defaultValue={this.props.currentAd?.price} name=\"price\" disabled={this.state.disabled} /><br /><br />\r\n          <button type=\"submit\" disabled={this.state.disabled}> Submit </button>\r\n        </form>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Add;\r\n","import React from 'react';\r\nimport Add from \"./Add\"\r\n\r\n\r\nclass Dashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      ads: [],\r\n      currentAd: undefined\r\n    }\r\n  }\r\n\r\n  refreshList(){\r\n    this.props.client.getAds()\r\n    .then((response) => this.setState({ ads: response.data }))\r\n  }\r\n\r\n  removeAdvert(id){\r\n    this.props.client.removeAd(id)\r\n    .then(() =>this.refreshList())\r\n  }\r\n\r\n  updateAdvert(ad){\r\n    this.setState({currentAd: ad})\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.refreshList()\r\n  }\r\n\r\n  buildrows() {\r\n    return this.state.ads.map((current) => {\r\n      return (<tr key={current._id}>\r\n        <td>{current.name}</td>\r\n        <td>Â£{current.price}</td>\r\n        <td>\r\n          <button onClick={()=> this.removeAdvert(current._id)}> remove</button>\r\n          <button onClick={()=> this.updateAdvert(current)}> update</button>\r\n        </td>\r\n      </tr>)\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        Dashboard<br />\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>\r\n                Advert Name\r\n              </th>\r\n              <th>\r\n                Price\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.buildrows()}\r\n          </tbody>\r\n        </table>\r\n        <br /><br />\r\n        <Add client={this.props.client} refreshList={() => {\r\n          this.refreshList()\r\n          this.setState({\r\n            currentAd: undefined})\r\n          }} \r\n          currentAd={this.state.currentAd}/>\r\n          <button onClick={() => this.props.client.logoutHandler()}>logout</button>\r\n      </>\r\n    )\r\n\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n","import axios from 'axios'\r\nconst url = 'http://localhost:3001/'\r\n\r\nexport class ApiClient {\r\n  constructor(tokenProvider, logoutHandler) {\r\n    this.tokenProvider = tokenProvider\r\n    this.logoutHandler = logoutHandler\r\n  }\r\n\r\n  async login(username, password) {\r\n    return await axios({\r\n      method: 'post',\r\n      url: `${url}auth`,\r\n      data: {\r\n        username,\r\n        password\r\n      }\r\n    });\r\n  }\r\n\r\n  authenticatedCall(method, url, data) {\r\n    return axios({\r\n      method,\r\n      url,\r\n      headers: {\r\n        authorization: this.tokenProvider()\r\n      },\r\n      data\r\n    })\r\n    .catch((error) => {\r\n      if (error.response.status === 403) {\r\n        this.logoutHandler();\r\n        return Promise.reject()\r\n      } else {\r\n        throw error;\r\n      }\r\n    })\r\n  }\r\n\r\n  getAds() {\r\n    return this.authenticatedCall('get', url)\r\n  }\r\n\r\n  addAd(name, price) {\r\n    return this.authenticatedCall('post', url, {name, price})\r\n  } \r\n\r\n  removeAd(id) {\r\n    return this.authenticatedCall('delete', `${url}${id}`)\r\n  }\r\n\r\n  updateAd(id, name, price) {\r\n    return this.authenticatedCall('put', `${url}${id}`, {name, price})\r\n  }\r\n\r\n}\r\n","import React from 'react';\nimport Login from './Login'\nimport Dashboard from './Dashboard';\nimport { ApiClient } from './apiClient';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      token: window.localStorage.getItem(\"token\")\n    }\n    this.client = new ApiClient(() => this.state.token, () => this.logout())\n  }\n\n  login(token) {\n    window.localStorage.setItem(\"token\", token)\n    this.setState({ token })\n  }\n  \n  logout() {\n    window.localStorage.removeItem(\"token\")\n    this.setState({ token: undefined })\n  }\n\n  render() {\n    if (this.state.token) {\n      return <Dashboard client={this.client}/>\n    }\n    return <Login loggedIn={(token) => this.login(token)} client={this.client}/>\n  }\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}